
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Higher Dimensional Trees I - Basics - Eric Finster&#8217;s Blog</title>
  <meta name="author" content="Eric Finster">

  
  <meta name="description" content="Ever since I became interested in homotopy type theory, I’ve been fascinated by the idea that we can build interesting topological (or more &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ericfinster.github.io/blog/2015/02/22/higher-dimensional-trees-i-basics/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
   <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Eric Finster's Blog" type="application/atom+xml">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lora:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:200,300,400,500,600,700,900' rel='stylesheet' type='text/css'>


	<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$$','$$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




  

  <style>html{background: url(/images/Elegant_Background-8.jpg) no-repeat center center fixed;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;}</style>
</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Higher Dimensional Trees I - Basics</h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-02-22T01:21:58+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Ever since I became interested in 
<a href="http://www.homotopytypetheory.org">homotopy type theory</a>, I’ve been 
fascinated by the idea that we can build interesting topological (or more
accurately, homotopy theoretic or higher categorical) objects out 
of pure logic.  In this first series of posts, I’m going to show 
you how some of the most basic datatypes of functional programming, 
lists and trees, are strikingly easy to extend into higher dimensions. 
All of this is very nicely described in the paper 
<a href="https://personal.cis.strath.ac.uk/neil.ghani/papers/ghani-calco07.pdf">Higher Trees, Algebraically</a>
by Neil Ghani and Alexander Kurz, although I have repackaged it a
bit for simplicity and to suit my purposes in later posts.</p>

<p>I’ll be giving the code samples in
<a href="http://wiki.portal.chalmers.se/agda/pmwiki.php">Agda</a> since it is so
simple and concise, although I think what I say should be reasonably
clear to anyone with some functional programming experience.
Everything here is relatively easy to translate into any other modern
functional language such as Scala, OCaml or Haskell.</p>

<p>Let’s get started!</p>

<!--more-->

<p>As usual with this kind of thing, it pays to work out the low
dimensional examples so that we can see exactly what we are trying to
generalize.  So, then, what is a zero dimensional tree?  Well, we
don’t have too many choices: the only really meaningful geometric
objects around in dimension zero are points.  </p>

<p>But just as lists and trees can be labelled with elements of some type
(they are <em>type constructors</em>) we’re going to want to label our points
with elements of some type.  With that in mind, the following definition
should serve our purposes:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="agda"><span class="line">  <span class="kr">data</span> Point <span class="o">(</span>A <span class="ow">:</span> <span class="kt">Set</span><span class="o">)</span> <span class="ow">:</span> <span class="kt">Set</span> <span class="kr">where</span>
</span><span class="line">    <span class="nf">pt</span> <span class="ow">:</span> A <span class="ow">→</span> Pt A
</span><span class="line">
</span><span class="line">  <span class="nf">samplePoint</span> <span class="ow">:</span> Point ℕ
</span><span class="line">  samplePoint <span class="ow">=</span> pt <span class="mi">4</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Now, astute readers will notice that this type is exceedingly boring since
<code>Point A</code> is clearly isomorphic to <code>A</code> itself.  Nevertheless, I’m going
to keep it around since it’s useful for making the pattern clear.</p>

<p>If we were to draw a picture of an element of <code>Point ℕ</code>, like the
one in the code above, it would just look like this:</p>

<p><img class="center" src="/images/hdts/point.png" /></p>

<p>So, moving on then, it probably won’t surprise you to learn that a
one-dimensional tree is just a list.  Here’s the definition I’m
going to use for lists:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="agda"><span class="line">  <span class="kr">data</span> List <span class="o">(</span>A <span class="ow">:</span> <span class="kt">Set</span><span class="o">)</span> <span class="ow">:</span> <span class="kt">Set</span> <span class="kr">where</span>
</span><span class="line">    <span class="nf">nil</span>  <span class="ow">:</span>                      List A
</span><span class="line">    <span class="nf">cons</span> <span class="ow">:</span> A <span class="ow">→</span> Point <span class="o">(</span>List A<span class="o">)</span> <span class="ow">→</span> List A
</span><span class="line">
</span><span class="line">  <span class="nf">sampleList</span> <span class="ow">:</span> List ℕ
</span><span class="line">  sampleList <span class="ow">=</span> cons <span class="mi">3</span> <span class="o">(</span>pt <span class="o">(</span>cons <span class="mi">1</span> <span class="o">(</span>pt <span class="o">(</span>cons <span class="mi">2</span> <span class="o">(</span>pt nil<span class="o">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>As you can see, I’ve done something sneaky: instead of the usual
definition of <code>cons</code>, I’ve stuck in that <code>Point</code> constructor from
above.  Since <code>Point (List A) = List A</code>, nothing has really 
changed, except that we’re being a bit more verbose.  Now let’s
look at the corresponding drawing for our little example list.  It
looks something like this:</p>

<p><img class="center" src="/images/hdts/list.png" /></p>

<p>The little grey boxes here are meant to indicate that after a 
piece of data introduced by the <code>cons</code> constructor, the remaining
“branches” of our 1-dimensional tree are being organized by the 
<code>Point</code> datatype.  Since this type constructor is not very
interesting, we always have a unique branch just like we would
expect.</p>

<p>I’ll just note that to be really precise, the boxes should extend over
the entire tail of the list (as is shown by the parentheses in our
term).  But this will be harder to draw in higher dimensions, so I’m
just going to content myself with what’s above.  </p>

<p>Okay, so far so good.  Let’s move on to trees, or what I’m going to
call 2-trees.  No surprises with the definition, it’s just as usual:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="agda"><span class="line">  <span class="kr">data</span> Tree <span class="o">(</span>A <span class="ow">:</span> <span class="kt">Set</span><span class="o">)</span> <span class="ow">:</span> <span class="kt">Set</span> <span class="kr">where</span>
</span><span class="line">    <span class="nf">leaf</span> <span class="ow">:</span>                     Tree A
</span><span class="line">    <span class="nf">node</span> <span class="ow">:</span> A <span class="ow">→</span> List <span class="o">(</span>Tree A<span class="o">)</span> <span class="ow">→</span> Tree A
</span><span class="line">
</span><span class="line">  <span class="nf">sampleTree</span> <span class="ow">:</span> Tree ℕ
</span><span class="line">  sampleTree <span class="ow">=</span>
</span><span class="line">    node <span class="mi">9</span> <span class="o">(</span>cons <span class="o">(</span>node <span class="mi">8</span> <span class="o">(</span>cons leaf <span class="o">(</span>pt <span class="o">(</span>cons leaf <span class="o">(</span>pt nil<span class="o">)))))</span>
</span><span class="line">       <span class="o">(</span>pt <span class="o">(</span>cons <span class="o">(</span>node <span class="mi">4</span> nil<span class="o">)</span>
</span><span class="line">       <span class="o">(</span>pt <span class="o">(</span>cons <span class="o">(</span>node <span class="mi">2</span> <span class="o">(</span>cons leaf <span class="o">(</span>pt nil<span class="o">)))</span>
</span><span class="line">       <span class="o">(</span>pt nil<span class="o">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>At least now the picture is slightly more interesting:</p>

<p><img class="center" src="/images/hdts/2tree.png" /></p>

<p>Notice how this time it’s the <code>List</code> type constructor which controls
how our tree is allowed to branch.  Because we are allowed to have a
1-dimensional family of branches, the data itself is organized in
2-dimensions.  Moreover, it’s useful to point out that our 2-trees are
<em>planar</em> in the sense that they pick up a canonical ordering of their
branches.</p>

<p>I hope I have now made it blindingly obvious how to continue on from
here.  A 3-tree, for example, will just have its branches organized by
a 2-tree.  And so on and so forth.  Using an indexed inductive type
(or GADT, if you prefer) we can get all the dimensions at once:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="agda"><span class="line">  <span class="kr">data</span> Tree <span class="o">(</span>A <span class="ow">:</span> <span class="kt">Set</span><span class="o">)</span> <span class="ow">:</span> ℕ <span class="ow">→</span> <span class="kt">Set</span> <span class="kr">where</span>
</span><span class="line">    <span class="nf">pt</span> <span class="ow">:</span> A <span class="ow">→</span> Tree A <span class="mi">0</span>
</span><span class="line">    <span class="nf">leaf</span> <span class="ow">:</span> <span class="o">{</span>n <span class="ow">:</span> ℕ<span class="o">}</span> <span class="ow">→</span> Tree A <span class="o">(</span>suc n<span class="o">)</span>
</span><span class="line">    <span class="nf">node</span> <span class="ow">:</span> <span class="o">{</span>n <span class="ow">:</span> ℕ<span class="o">}</span> <span class="ow">→</span> A <span class="ow">→</span> Tree <span class="o">(</span>Tree A <span class="o">(</span>suc n<span class="o">))</span> n <span class="ow">→</span> Tree A <span class="o">(</span>suc n<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Not surprisingly, the notation for terms starts to get more and more
unwieldy as you go higher and higher in dimension, but just to give an
example, here is a 3-tree:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="agda"><span class="line">  <span class="nf">sampleTree</span> <span class="ow">:</span> Tree <span class="mi">3</span> ℕ
</span><span class="line">  sampleTree <span class="ow">=</span> node <span class="mi">6</span>
</span><span class="line">               <span class="o">(</span>node
</span><span class="line">                <span class="o">(</span>node <span class="mi">12</span>
</span><span class="line">                 <span class="o">(</span>node leaf
</span><span class="line">                  <span class="o">(</span>node <span class="o">(</span>node leaf <span class="o">(</span>node leaf <span class="o">(</span>pt leaf<span class="o">)))</span>
</span><span class="line">                   <span class="o">(</span>pt <span class="o">(</span>node <span class="o">(</span>node leaf <span class="o">(</span>node leaf <span class="o">(</span>pt leaf<span class="o">)))</span> <span class="o">(</span>pt leaf<span class="o">))))))</span>
</span><span class="line">                <span class="o">(</span>node
</span><span class="line">                 <span class="o">(</span>node <span class="o">(</span>node <span class="mi">7</span> <span class="o">(</span>node leaf <span class="o">(</span>node leaf <span class="o">(</span>pt leaf<span class="o">))))</span>
</span><span class="line">                  <span class="o">(</span>node leaf <span class="o">(</span>pt leaf<span class="o">)))</span>
</span><span class="line">                 <span class="o">(</span>pt
</span><span class="line">                  <span class="o">(</span>node
</span><span class="line">                   <span class="o">(</span>node
</span><span class="line">                    <span class="o">(</span>node <span class="mi">4</span>
</span><span class="line">                     <span class="o">(</span>node leaf <span class="o">(</span>node <span class="o">(</span>node leaf <span class="o">(</span>node leaf <span class="o">(</span>pt leaf<span class="o">)))</span> <span class="o">(</span>pt leaf<span class="o">))))</span>
</span><span class="line">                    <span class="o">(</span>node leaf <span class="o">(</span>pt leaf<span class="o">)))</span>
</span><span class="line">                   <span class="o">(</span>pt leaf<span class="o">)))))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And here’s what it looks like:</p>

<p><img class="center" src="/images/hdts/3tree.png" /></p>

<p>In the next couple of posts, I’ll start to develop some tools
for working with these types.  Then from there I’ll try to explain
what all this has to do with higher category theory, and how
one might put these objects to good use.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Eric Finster</span></span>

      








  


<time datetime="2015-02-22T01:21:58+01:00" pubdate data-updated="true"></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://ericfinster.github.io/blog/2015/02/22/higher-dimensional-trees-i-basics/" data-via="" data-counturl="http://ericfinster.github.io/blog/2015/02/22/higher-dimensional-trees-i-basics/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/02/22/front-matter/" title="Previous Post: Front Matter">&laquo; Front Matter</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section id="titles">
  <a href="http://ericfinster.github.io" title="Eric Finster's Blog"><img id="logo" src="/images/opetope-logo.png" /></a>
  <h1 id="site_title"><a href="http://ericfinster.github.io" title="Eric Finster's Blog">Eric Finster&#8217;s Blog</a></h1>
  <h3 id="site_subtitle">Things I Like and Hopefully You Do Too</h3>
</section>

<section id="menu">
  <ul>
    <li><i class="fa fa-home fa-lg"></i><a href="http://ericfinster.github.io"> Home </a></li>
    <li><i class="fa fa-calendar fa-lg"></i><a href="http://ericfinster.github.io/blog/archives/"> Archives </a></li>
    <li><i class="fa fa-user fa-lg"></i><a href="http://ericfinster.github.io/about/"> About </a></li>
    <li><i class="fa fa-rss fa-lg"></i><a href="http://ericfinster.github.io/atom.xml"> Feed </a></li>
  </ul>
</section>

<section id="social">
  

  

  

  

  

  
</section>


<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/02/22/higher-dimensional-trees-i-basics/">Higher Dimensional Trees I - Basics</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/22/front-matter/">Front Matter</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Eric Finster -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
